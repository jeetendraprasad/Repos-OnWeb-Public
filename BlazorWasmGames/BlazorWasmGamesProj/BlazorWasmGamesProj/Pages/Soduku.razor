@page "/"
@page "/soduku"

@using System.Diagnostics
@using System.Timers;
@using BlazorWasmGamesProj.Code

@implements IDisposable

<h3>Soduku</h3>
<br />

<div>
    <input type="text" name="rows_size" @bind=@rowsBlock placeholder="Rows" />
    <input type="text" name="cols_size" @bind=@colsBlock placeholder="Columns" />
</div>

<br />

<input type="checkbox" id="edit-mode" name="edit-mode" @bind=@editMode>
<label for="edit-mode"> Edit?</label>
<br>


<br />

<div style="@GetSodukuStyle()">

    @for (int i = 0; i < colsBlock; i++)
    {
        <div style="@GetBlockRowStyle()">

            @for (int j = 0; j < rowsBlock; j++)
            {
                string blocId = GetBlockId(j, i);

                <div style="@GetBlockStyle(i*rowsBlock+j)" id="@blocId">

                    @for (int k = 0; k < colsBlock; k++)
                    {
                        @for (int l = 0; l < rowsBlock; l++)
                        {
                            string cellId = GetCellId(blocId, k, l);

                            <div class="@(cellId==highlightCell ? "highlight" : "")" style="@GetCellStyle(cellId)" id="@cellId">
                                @cellId
                                <input type="text" style="overflow : hidden; width : 100%;" id="@(cellId+":L")" />
                                <br />
                                @for (int m = 0; m < rowsBlock * colsBlock; m++)
                                {
                                    <button style="font-size: 0.5em;" id="@(cellId+":H"+(m+1).ToString())">@(m + 1)</button>
                                }
                            </div>
                        }
                    }

                </div>
            }

        </div>
    }

</div>

<br />

<div style="@GetSodukuStyle()">
    @foreach (var cellId in SuHoriFullFlattened)
    {
        <div class="@(cellId==highlightCell ? "highlight" : "")" style="@GetCellStyle(cellId)" id="@cellId">
            @cellId
            <input type="text" style="overflow : hidden; width : 100%;" id="@(cellId+":L")" />
            <br />
            @for (int m = 0; m < rowsBlock * colsBlock; m++)
            {
                <button style="font-size: 0.5em;" id="@(cellId+":H"+(m+1).ToString())">@(m + 1)</button>
            }
        </div>
    }
</div>

<br>
<button @onclick="( async () => await Debug1())">Debug1</button>
<button @onclick="( async () => await Debug2())">Debug2</button>
<br />


@code {


}